<html>
  <head>
    <title>BCI on the web</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
    <script src="https://aframe.io/releases/0.6.0/aframe.min.js"></script>
    <script src="easyrtc/easyrtc.js"></script>
    <script src="https://unpkg.com/networked-aframe/dist/networked-aframe.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.5/dist/aframe-particle-system-component.min.js"></script>
    <script src="//unpkg.com/aframe-leap-hands/dist/aframe-leap-hands.js"></script>


    <script>
      // Define custom schema for syncing avatar color, set by random-color
      var headSchema = {
        template: '#hand-template',
        components: [
          'position',
          'rotation',
          {
            selector: '.hand',
            component: 'material'
          }
        ]
      };
      NAF.schemas.add(headSchema);
      // Called by Networked-Aframe when connected to server

    </script>


  </head>
  <body>
    <div id="container">


      <div id = "WebVrScene">
        <a-scene leap="vr: true" networked-scene="
          webrtc: true;
          webrtcAudio: false;
          ">
          <a-assets>
            <img id="grid" src="https://img.gs/bbdkhfbzkk/stretch/https://i.imgur.com/25P1geh.png" crossorigin="anonymous">
            <img id="sky" src="https://i.imgur.com/WqlqEkq.jpg" crossorigin="anonymous" />

            <script id="player-template" type="text/html">
              <a-entity>
              </a-entity>
            </script>

            <script id="head-template" type="text/html">
              <a-entity leap-hand="hand: left" position="0 1.5 -.5"></a-entity>
              <a-entity leap-hand="hand: right"position="0 1.5 -.5"></a-entity>
              <a-entity class="avatar">
                <a-sphere class="head"
                  color="#5985ff"
                  scale="0.3 0.35 0.25"
                  random-color
                ></a-sphere>
                <a-entity class="face" position="0 0.05 0">
                  <a-sphere class="eye"
                    color="#efefef"
                    position="0.1 0.1 -0.2"
                    scale="0.12 0.12 0.12"
                   >
                    <a-sphere class="pupil"
                      color="#000"
                      position="0 0 -1"
                      scale="0.2 0.2 0.2"
                    ></a-sphere>
                  </a-sphere>
                  <a-sphere class="eye"
                    color="#efefef"
                    position="-0.1 0.1 -0.2"
                    scale="0.12 0.12 0.12"
                    >
                    <a-sphere class="pupil"
                     color="#000"
                     position="0 0 -1"
                     scale="0.2 0.2 0.2"
                    ></a-sphere>
                  </a-sphere>
                </a-entity>
              </a-entity>
            </script>

            <script id="hand-template" type="text/html">
              <a-box scale="0.1 0.1 0.1"></a-box>
            </script>
          </a-assets>

          <a-entity id="player" networked="template:#player-template;showLocalTemplate:false;" spawn-in-circle="radius:3" wasd-controls>
            <a-entity camera="userHeight: 1.6" look-controls networked="template:#head-template;showLocalTemplate:false;"></a-entity>
            <a-entity hand-controls="left" networked="template:#hand-template;showLocalTemplate:false;"></a-entity>
            <a-entity hand-controls="right" networked="template:#hand-template;showLocalTemplate:false;"></a-entity>

          </a-entity>

          <a-entity position="0 0 0"
           geometry="primitive: plane; width: 10000; height: 10000;" rotation="-90 0 0"
           material="src: #grid; repeat: 10000 10000; transparent: true; metalness:0.6; roughness: 0.4; sphericalEnvMap: #sky;">
         </a-entity>

         <a-sky src="#sky" rotation="0 -90 0"></a-sky>

       </a-scene>
      </div>
    </div>


  </body>
</html>
